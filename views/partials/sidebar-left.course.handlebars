<!-- sidebar-left.course.handlebars -->
<nav class="sidebar h-fit relative lg:sticky top-32" id="sidebar">
    <button onclick='closeSideMenu()' class="flex items-center p-1 top-2 h-fit rounded-r-lg absolute right-[-3rem]">
    <i class="material-symbols-outlined cursor-pointer text-xxxl text-brand_red  transition ease-in-out duration-1000" aria-hidden="true">chevron_left</i>
    </button>
    <!-- sidebar sticky behavior beginning from lg size -->
    <div class="p-2 lg:max-h-screen w-full">

      <!-- DROPDOWN MENU -->

      <div class="card !p-10">

        <div class="!no-underline mb-4">
          <!-- Topic name and code -->
          {{#each courses}}
            {{#if_equal this.courseSlug ../path.courseSlug}}
            <a href="/course/{{../../path.courseSlug}}/{{../../docs.[0].slug}}?ref={{../../path.refBranch}}" class="!no-underline">
            <div class="mb-2 w-[22rem] max-w-full">
              <div class="text-md font-bold mb-2 d uppercase">{{../this.courseName}}</div>
            </div>
            <div class="flex flex-row justify-between flex-wrap flex-end">
              <div class="flex flex-col gap-y-0">
                  <p class="flex items-start gap-2 m-0 p-0">{{../this.courseCode}}</p>
                <div class="flex flex-nowrap justify-start gap-x-4 items-center py-1 text-sm">
                  <p class="flex whitespace-nowrap items-start gap-2 m-0 p-0"><span class="material-symbols-outlined !text-base">confirmation_number</span><span>{{../this.courseEAP}} EAP</span></p>
                  <p class="flex flex-nowrap items-start gap-2 m-0 p-0"><span class="material-symbols-outlined !text-base">grading</span>{{capitalize ../this.courseGrading}}</p>
                </div>
                <div class="flex flex-nowrap justify-start gap-x-4 items-center py-1 text-sm">
                  <p class="flex flex-nowrap items-start gap-2 m-0 p-0"><span class="material-symbols-outlined !text-base">calendar_month</span>{{../../config.semester}}</p>
                  <p class="flex flex-nowrap items-start gap-2 m-0 p-0"><span class="material-symbols-outlined !text-base">person</span>{{#with (findTeacher ../../config.teacherUsername ../../teachers)}}{{this.displayName}}{{/with }}</p>
                </div>
              </div>
            </a>
            {{/if_equal}}
            {{/each}}
            </div>
        </div>

        <div class="tabs">

          <!-- Lessons links -->
          {{#each lessons}}
          <div class="tab 
            {{#if_equal this.slug ../path.contentSlug }} 
              active-tab
            {{/if_equal }}
          ">
            <input type="checkbox" id="chck{{@index}}"> <!-- @index reads every element index in "loengud" arrays. result: unique ID-s chck0, chck1, chck2 jne -->
            <label class="tab-label" for="chck{{@index}}">
              <div class="flex gap-2 w-full">
                <a class="grow py-3 !no-underline" href="/course/{{../path.courseSlug}}/{{this.slug}}?ref={{../path.refBranch}}">{{this.name}}
                </a>
              </div>
            </label>  
            
            <!-- Themes links -->
            {{#each this.components}}
              <div class="tab-content flex gap-2
                {{#if_equal (concatActivePath ../this.slug this) ../../path.fullPath }}
                  active-tab-content menu-card
                {{/if_equal }}
              " >
                <a class="flex flex-row justify-between grow py-3 !no-underline" 
                  href="/course/{{../../path.courseSlug}}/{{../this.slug}}/{{this}}?ref={{../../path.refBranch}}">
                  <div class="flex gap-2" >
                      <span class="material-symbols-outlined">
                        {{{showComponentType this ../../concepts ../../practices}}}
                      </span>
                      {{{showComponentName this ../../concepts ../../practices}}}
                    </div>
                  {{#if_not_equal ../../user.team.slug 'teachers' }}
                    {{#ifInMarkedComponents (showComponentUUID ../this ../../../concepts ../../../practices) ../../../markedAsDoneComponentsArr }}
                    <span class="material-symbols-outlined">task_alt</span>
                    {{else }}
                    <span class="material-symbols-outlined">radio_button_unchecked</span>
                    {{/ifInMarkedComponents }}
                  {{/if_not_equal }}
                  </a>
              </div>
            {{/each}}

            <!-- Lesson extra material -->
            {{#each this.additionalMaterials}}
              <div class="tab-content flex gap-2
                {{#if_equal (concatActivePath ../this.slug this.slug) ../../path.fullPath }} 
                  active-tab-content
                {{/if_equal }}
              ">
                <a class="py-3 w-full !no-underline" 
                href="/course/{{../../path.courseSlug}}/{{../this.slug}}/{{this.slug}}?ref={{../../path.refBranch}}">{{this.name}}</a>

              </div>
            {{/each}}

          </div>
          {{/each}}

          <!-- Topic extra material link -->
          {{#each additionalMaterials}}
          <div class="tab
            {{#if_equal this.slug ../path.fullPath }} 
              active-tab
            {{/if_equal }}
          ">
            <label class="no-tab-label">
              <a class="py-3 w-full !no-underline" href="/course/{{../path.courseSlug}}/{{this.slug}}?ref={{../path.refBranch}}">{{this.name}}
              </a></label>
          </div>
          {{/each}}

        </div>
      </div>


      
 

    </div>
  
</nav>


