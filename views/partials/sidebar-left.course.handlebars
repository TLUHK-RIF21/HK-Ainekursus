<nav class="sidebar h-fit relative lg:sticky top-0" id="sidebar">
    <button onclick='closeSideMenu()' class="flex items-center p-1 top-2 h-fit bg-neutral-100 rounded-r-lg absolute right-[-3rem]">
    <i class="material-symbols-outlined cursor-pointer text-xxxl text-brand_red  transition ease-in-out duration-1000" aria-hidden="true">chevron_left</i>
    </button>
    <!-- sidebar sticky behavior beginning from lg size -->
    <div class="p-2 lg:max-h-screen drop-shadow-2xl w-full">

      <!-- DROPDOWN MENU -->

      <div class="bg-neutral-100 mb-8 ">

        <div class="!no-underline p-4 border-b border-neutral-200 btn-primary">
          <!-- Topic name and code -->
          {{#each courses}}
            {{#if_equal this.courseSlug ../path.courseSlug}}
            <a href="/course/{{../../path.courseSlug}}/{{../../docs.[0].slug}}?ref={{../../path.refBranch}}" class="!no-underline">
            <div class="mb-2 w-[22rem] max-w-full">
              <div class="!text-white text-md font-bold mb-2 d uppercase">{{../this.courseName}}</div>
            </div>
            <div class="flex flex-row justify-between flex-wrap flex-end">
              <div class="flex flex-col gap-y-0">
                <div class="flex flex-nowrap justify-start gap-x-4 items-center !text-white py-2 pr-2">
                  <p class="flex items-start gap-2 m-0 p-0">{{../this.courseCode}}</p>
                  <p class="flex whitespace-nowrap items-start gap-2 m-0 p-0"><span class="material-symbols-outlined">confirmation_number</span><span>{{../this.courseEAP}} EAP</span></p>
                  <p class="flex flex-nowrap items-start gap-2 m-0 p-0"><span class="material-symbols-outlined">grading</span>{{capitalize ../this.courseGrading}}</p>
                </div>
                <div class="flex flex-nowrap justify-start gap-x-4 items-center !text-white py-2 pr-2">
                  <p class="flex flex-nowrap items-start gap-2 m-0 p-0"><span class="material-symbols-outlined">calendar_month</span>{{../../config.semester}}</p>
                  <p class="flex flex-nowrap items-start gap-2 m-0 p-0"><span class="material-symbols-outlined">person</span>{{#with (findTeacher ../../config.teacherUsername ../../teachers)}}{{this.displayName}}{{/with }}</p>
                </div>
              </div>
            </a>
            {{/if_equal}}
            {{/each}}
            </div>
        </div>

        <div class="tabs">

          <!-- Lessons links -->
          {{#each lessons}}
          <div class="tab 
            {{#if_equal this.slug ../path.contentSlug }} 
              active-tab
            {{/if_equal }}
          ">
            <input type="checkbox" id="chck{{@index}}"> <!-- @index loeb iga elemendi indeksit "loengud" arrays. Tulemus: unikaalsed ID-d chck0, chck1, chck2 jne -->
            <label class="tab-label" for="chck{{@index}}">
              <div class="flex gap-2 w-full">
                <a class="grow py-3 !no-underline" href="/course/{{../path.courseSlug}}/{{this.slug}}?ref={{../path.refBranch}}">{{this.name}}
                </a>
              </div>
            </label>
            
            <!-- Themes links -->
            {{#each this.components}}
              <div class="tab-content flex gap-2 
                {{#if_equal (concatActivePath ../this.slug this) ../../path.fullPath }}
                  active-tab-content
                {{/if_equal }}
              " >
                <a class="grow py-3 !no-underline" 
                  href="/course/{{../../path.courseSlug}}/{{../this.slug}}/{{this}}?ref={{../../path.refBranch}}">
                  <div class="flex gap-2 w-full" >
                      <span class="material-symbols-outlined">
                        {{{showComponentType this ../../concepts ../../practices}}}
                      </span>
                      {{{showComponentName this ../../concepts ../../practices}}}
                    </div>
                  </a>
                  {{#ifInMarkedComponents (showComponentUUID this ../../concepts ../../practices) ../../markedAsDoneComponentsArr }}
                  <span class="!pt-3 material-symbols-outlined">task_alt</span>
                  {{else }}
                  <span class="!pt-3 material-symbols-outlined">radio_button_unchecked</span>
                  {{/ifInMarkedComponents }}
              </div>
            {{/each}}

            <!-- Lesson extra material -->
            {{#each this.additionalMaterials}}
              <div class="tab-content flex gap-2
                {{#if_equal (concatActivePath ../this.slug this.slug) ../../path.fullPath }} 
                  active-tab-content
                {{/if_equal }}
              ">
                <a class="py-3 w-full !no-underline" 
                href="/course/{{../../path.courseSlug}}/{{../this.slug}}/{{this.slug}}?ref={{../../path.refBranch}}">{{this.name}}</a>

              </div>
            {{/each}}

          </div>
          {{/each}}

          <!-- Topic extra material link -->
          {{#each additionalMaterials}}
          <div class="tab
            {{#if_equal this.slug ../path.fullPath }} 
              active-tab
            {{/if_equal }}
          ">
            <label class="no-tab-label">
              <a class="py-3 w-full !no-underline" href="/course/{{../path.courseSlug}}/{{this.slug}}?ref={{../path.refBranch}}">{{this.name}}
              </a></label>
          </div>
          {{/each}}

        </div>
      </div>


      <!-- other courses -->
      <div class="!no-underline">
          {{#each courses}}
            {{#if_not_equal this.courseSlug ../path.courseSlug}}
            <!-- beginning of loupe -->
            <div class="mb-2 bg-neutral-200 break-all">

                <a class="flex p-4 text-sm font-bold !no-underline uppercase hover:bg-neutral-300" href="/course/{{../this.courseSlug}}/about?ref={{../this.refBranch}}">{{../this.courseName}}</a>

              <div class="flex justify-between items-center">
                {{!-- <a class="!no-underline hover:!underline" href="/{{../this.courseSlug}}/about">{{../this.courseCode}}</a> --}}
                {{!-- <a class="px-4 py-2 bg-neutral-200 hover:bg-neutral-300 !no-underline" href="/{{../this.courseSlug}}/about">Ainekursusest</a> --}}
              </div>
            </div>
            {{/if_not_equal}}
          {{/each}}
      </div>
 

    </div>
  
</nav>


