<!-- notifications.handlebars -->
<div class="flex flex-row grow 2xl:justify-between overflow-x-hidden lg:overflow-x-clip">
  <main id="main-content" class="px-4 py-8 dashboard_content">
    <div class="flex flex-col flex-nowrap grow justify-between">
      {{#unless user }}  
        <h2 class='font-sans text-xl font-bold mt-4 ml-4'>Logi sisse, et näha teateid</h2>
      {{/unless }}

      {{#if user }}
        <h1>Teated</h1>
        {{#if_equal user.team.slug 'teachers'}}
        <p class="m-0">Siin lehel näed kõiki teateid, mis on seotud sulle nähtavate ainekursustega.</p>
        <p class="m-0">NB! Teateid kuvatakse ainult vaikimisi harudest!</p>
        {{else}}
        <p class="m-2">Siin lehel näed teateid, mis on seotud sulle nähtavate ainekursustega.</p>
        {{/if_equal}}
        <div class="">
          <div>
            {{#unless courseUpdates30Days }}
              <h2 class="font-sans text-xl font-bold">Viimase 30 päeva jooksul teated puuduvad.</h2 class="font-sans text-xl font-bold">
            {{/unless }}

            {{#if courseUpdates30Days }}
              <h2 class="font-sans text-xl font-bold">Viimase 30 päeva teated:</h2 class="font-sans text-xl font-bold">
              <div class="divide-y divide-stroke">
                {{#each courseUpdates30Days }} 
                  <div class="flex flex-wrap py-2">
                    {{#if_equal ../this.user.team.slug 'teachers' }}
                    <div class="basis-4/5 shrink-0 grow-0">
                      <span class="material-symbols-outlined text-base text-system-red-tlu">notifications</span><!-- AINE --><a class=" text-sm" href="/course/{{this.course.courseSlug}}/about?ref={{this.course.refBranch}}">{{../this.course.courseName}}:</a>
                    </div>
                    <div class="text-sm basis-1/5 text-right shrink-0 grow-0">
                      <div><!-- AEG -->{{timeSince this.created_at }}</div>
                    </div>
                    {{/if_equal }}

                    <div class="basis-4/5 shrink-0 grow-0">
                    <!-- Sisu -->{{this.body}}
                    </div>

                    <div class=" text-sm basis-1/5 text-right shrink-0 grow-0">
                    {{#if_equal ../this.user.team.slug 'teachers' }}
                      <div><!-- ÕPPEJÕUD -->{{#with (findTeacher ../this.user.login ../../teachers)}}{{this.displayName}}{{/with }}</div><div> <!-- OKS-->{{../this.course.refBranch}}</div>
                    {{/if_equal }}
                    </div>

                    
                    
                  </div>
                  {{#unless @last}}
                  {{/unless}}
                {{/each }}
              </div>
            {{/if }}

            
          </div>
        </div>
      {{/if }}
    </div>

  </main>

</div>







<div class="flex flex-row grow 2xl:justify-between overflow-x-hidden lg:overflow-x-clip">
  <main id="main-content" class="w-full px-4 py-8 dashboard_content">
    <div class="flex flex-col flex-nowrap grow justify-between">
      {{#unless user }}  
        <h3 class='mt-4 ml-4'>Logi sisse, et näha teateid</h3>
      {{/unless }}

      {{#if user }}
        <h1>Teated</h1>
        {{#if_equal user.team.slug 'teachers'}}
        <p class="mt-2 m-0">Siin lehel näed kõiki teateid, mis on seotud sulle nähtavate ainekursustega.</p>
        <p>NB! Teateid kuvatakse ainult vaikimisi harudest!</p>
        {{else}}
        <p class="m-2">Siin lehel näed teateid, mis on seotud sulle nähtavate ainekursustega.</p>
        {{/if_equal}}
        <div class="">
          <div class="pb-4">
            {{#unless courseUpdates30Days }}
              <h3>Viimase 30 päeva jooksul teated puuduvad.</h3>
            {{/unless }}

            {{#if courseUpdates30Days }}
              <h3>Viimase 30 päeva teated:</h3>
              <div class="pb-8">
                {{#each courseUpdates30Days }} 
                  <div>
                    <div class="flex items-start gap-2 pb-2"><p class="p-0 m-0 text-sm text-gray-400">{{timeSince this.created_at }}</p></div>
                    {{#if_equal ../this.user.team.slug 'teachers' }}
                      <div class="flex items-start gap-2 pb-2"><p class="p-0 m-0">{{#with (findTeacher ../this.user.login ../../teachers)}}{{this.displayName}}{{/with }} uuendas <a href="/course/{{this.course.courseSlug}}/about?ref={{this.course.refBranch}}"><b>{{../this.course.courseName}}</b></a> {{../this.course.refBranch}} haru: <br></p></div>
                    {{else }}
                      <div class="flex items-start gap-2 pb-2"><p class="p-0 m-0">{{#with (findTeacher ../this.user.login ../../teachers)}}{{this.displayName}}{{/with }} uuendas <a href="/course/{{this.course.courseSlug}}/about?ref={{this.course.refBranch}}"><b>{{../this.course.courseName}}</b></a> {{!-- {{this.course.refBranch}} haru --}}:<br></p></div>
                    {{/if_equal }}
                    <div class="flex items-start gap-2 pt-4 pb-4 pl-3 pr-2 bg-neutral-100"><span class="material-symbols-outlined">notifications</span> <p class="pt-0 m-0">{{this.body}}</p></div>
                  </div>
                  {{#unless @last}}
                    <hr class="mt-4 mb-4">
                  {{/unless}}
                {{/each }}
              </div>
            {{/if }}
            
          </div>
        </div>
      {{/if }}
    </div>

  </main>

</div>
