<div class="flex flex-row grow 2xl:justify-between overflow-x-hidden lg:overflow-x-clip">
  <main id="main-content" class="w-full px-4 py-16 dashboard_content">
    
      <div class="flex flex-col flex-nowrap grow justify-between">
      {{#unless user }}  
        <h3 class='mt-4 ml-4'>Logi sisse, et näha ülevaadet</h3>
      {{/unless }}

      {{#if user }}
        <h1>Tagasi üldvaatesse:</h1>
        <div class="flex flex-row justify-start gap-x-4">
          <form method="POST" action="/progress-overview" name="displayByTeams" id="displayByTeams">
            <!-- Hidden form inputs to send req.body values -->
            <input type="hidden" name="displayBy" id="displayBy" value="teams" >
            <button name="displayByTeamsButton" class="btn btn-secondary">Tiimide järgi</button>
          </form>
          <form method="POST" action="/progress-overview" name="displayByCourses" id="displayByCourses">
            <!-- Hidden form inputs to send req.body values -->
            <input type="hidden" name="displayBy" id="displayBy" value="courses" >
            <button name="displayByCoursesButton" class="btn btn-secondary">Kursuste järgi</button>
          </form>
        </div>

        <div class="">

          <h1>Detailvaade:</h1>
          <h3>Tiim: <span class="uppercase">{{team}}</span></h3>
          <div class="flex flex-nowrap content-center">
            <h3>Ainekursus: <span class="uppercase">{{courseData.courseName}}</span></h3> <p class="pl-3">{{courseData.refBranch}} haru</p>
          </div>

          <div class="overflow-x-auto w-full ">
            <table class="table-fixed border-separate border border-slate-400 pt-4">
              <col>
                {{#each courseData.config.lessons }}
                  <colgroup span="{{this.components.length}}"></colgroup>
                {{/each }}
              <tr>
                <td rowspan="2"></td>
                {{#each courseData.config.lessons }}
                  <th class="border border-slate-300 p-4" colspan="{{this.components.length}}" scope="colgroup">{{this.name}}</th>
                {{/each }}
              </tr>
              <tr>
                {{#each courseData.config.lessons }}
                  {{#each this.components}}
                    <th class="border border-slate-300 p-4" scope="col">
                    {{#with (showComponentName this ../../courseData.config.concepts ../../courseData.config.practices)}}  
                      {{this}}
                    {{/with}} {{!--  –
                    {{#with (showComponentUUID this ../../courseData.config.concepts ../../courseData.config.practices)}} 
                      {{this}}
                    {{/with}}--}}
                    </th>
                  {{/each }}
                {{/each }}
              </tr>
              {{#each usersData}}
                <tr>
                  <th class="border border-slate-300 px-4 py-3" scope="row">{{this.displayName}}{{!-- comp: {{this.markedAsDoneComponents}} --}}</th>
                  {{#each ../courseData.config.lessons }}
                    {{#each this.components}}
                      {{#ifInMarkedComponents (showComponentUUID this ../../../courseData.config.concepts ../../../courseData.config.practices) ../../this.markedAsDoneComponents}}
                        <td class="border border-slate-300 text-center px-4 py-3"><span class="material-symbols-outlined bg-green-100">task_alt</span></td>
                      {{else}}
                        <td class="border border-slate-300 text-center px-4 py-3">-</td>
                      {{/ifInMarkedComponents}}
                    {{/each }}
                  {{/each }}
                </tr>
              {{/each }}
            
            </table>
          </div>

        </div>

      {{/if }}
    </div>

  </main>

</div>
